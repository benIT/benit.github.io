<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; benIT&#039;s notebook &mdash; </title>
        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <meta name="robots" content="noindex, follow">
                <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <link rel="apple-touch-startup-image" href="/images/jackson/2048x2048.png">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="shortcut icon" sizes="76x76" href="/images/jackson/76x76.png">
        <link rel="shortcut icon" sizes="120x120" href="/images/jackson/120x120.png">
        <link rel="shortcut icon" sizes="128x128" href="/images/jackson/128x128.png">
        <link rel="shortcut icon" sizes="152x152" href="/images/jackson/152x152.png">
        <link rel="shortcut icon" sizes="196x196" href="/images/jackson/196x196.png">
        <link rel="shortcut icon" sizes="512x512" href="/images/jackson/512x512.png">
        <link rel="shortcut icon" sizes="1024x1024" href="/images/jackson/1024x1024.png">
        <link rel="shortcut icon" sizes="2048x2048" href="/images/jackson/2048x2048.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/images/jackson/76x76.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/images/jackson/120x120.png">
        <link rel="apple-touch-icon" sizes="128x128" href="/images/jackson/128x128.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/images/jackson/152x152.png">
        <link rel="apple-touch-icon" sizes="196x196" href="/images/jackson/196x196.png">
        <link rel="apple-touch-icon" sizes="512x512" href="/images/jackson/512x512.png">
        <link rel="apple-touch-icon" sizes="1024x1024" href="/images/jackson/1024x1024.png">
        <link rel="apple-touch-icon" sizes="2048x2048" href="/images/jackson/2048x2048.png">

        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="benIT&#039;s notebook activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
                                    </head>
    <a href="https://github.com/benIT/github-blog"><img style="z-index:1032;position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
    <body>
        <header>
            <nav class="navbar navbar-inverse navbar-fixed-top">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">benIT&#039;s notebook </a>
                    </div>
                    <div id="navbar" class="collapse navbar-collapse">
                        <ul class="nav navbar-nav">
                            <li><a href="https://github.com/benIT">Github</a></li>
                            <li><a href="/blog">Posts Archive</a></li>
                            <li><a href="/blog/categories">Categories</a></li>
                            <li><a href="/atom.xml">RSS feed</a></li>
                            <!--<li><a href="/blog/tags">Tags</a></li>-->
                            <li><a href="/about">About</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/blog/2020/04/01/rpi-dev-7-system-logs">rpi dev 7 - System logs</a></h2>
        </header>
        <div>
            <h2 id="interesting-logs">interesting logs</h2>

<ul>
<li>/var/log/auth.log</li>
<li>/var/log/ufw.log</li>
<li>/var/log/apache2/*access.log</li>
<li>/var/log/apache2/*error.log</li>
</ul>

<h2 id="tools">tools</h2>

<h3 id="lnav---ncurses-based-log-file-viewer">lnav - ncurses-based log file viewer</h3>

<p>From man: The  log  file navigator, lnav, is an enhanced log file viewer that takes advantage of any semantic information that can be gleaned from the files being viewed, such as timestamps and log levels</p>

<pre><code>apt install -y lnav

lnav /var/log/auth.log /var/log/ufw.log /var/log/apache2/*access.log
</code></pre>

<h3 id="ezservermonitor">ezservermonitor</h3>

<p>Install webapp:</p>

<pre><code>wget https://www.ezservermonitor.com/esm-web/downloads/version/2.5 -O ezservermonitor.zip
</code></pre>

<p>Configure in <code>conf/esm.config.json</code></p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/blog/2020/04/01/rpi-dev-6-ssmtp">rpi dev 6 - setup ssmpt with netcourrier</a></h2>
        </header>
        <div>
            <h2 id="install">install</h2>

<pre><code>apt-get install ssmtp
apt-get install mailutils
</code></pre>

<h2 id="configure">configure</h2>

<p>edit <code>/etc/ssmtp/ssmtp.conf</code>:</p>

<pre><code>root=
mailhub=mail.net-c.com:465
hostname=myhost.com
AuthUser=usermail@netc.fr
AuthPass=ENTER-SMTP-PASSWORD-HERE
FromLineOverride=YES
UseTLS=YES
</code></pre>

<h2 id="test">Test</h2>

<p>echo "Hello world email body" | mail -s "Test Subject" test@mail.fr</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/blog/2020/04/01/rpi-dev-5-ufw">rpi dev 5 - UFW</a></h2>
        </header>
        <div>
            <h2 id="enable%2Fdisable">enable/disable</h2>

<pre><code>ufw logging on
ufw disable
ufw enable
</code></pre>

<h2 id="log-file">log file</h2>

<pre><code>tail -f /var/log/ufw.log
</code></pre>

<h2 id="print-fw-rules">Print FW rules</h2>

<pre><code>ufw status verbose
ufw status numbered
</code></pre>

<h2 id="common-rules">Common rules</h2>

<h3 id="block-all-incoming-%26-outgoing-trafic">Block all INcoming &amp; outgoing trafic</h3>

<pre><code>ufw default deny incoming
ufw default deny outgoing
</code></pre>

<h3 id="allow-common-services">Allow common services</h3>

<pre><code>ufw allow out 53 comment 'DNS'
ufw allow out 465 comment 'SMTP'
ufw allow ntp
</code></pre>

<h3 id="allow-all-incomming-requests-on-all-ports-from-an-%40ip-range">Allow all INcomming requests on all ports from an @IP range</h3>

<pre><code>ufw allow from 192.168.1.0/24
</code></pre>

<h3 id="allow-all-incomming-requests-on-all-ports-from-an-%40ip">Allow all INcomming requests on all ports from an @IP</h3>

<pre><code>ufw allow from XXX.XXX.XXX.XXX
</code></pre>

<h3 id="allow-incomming-requests-on-specific-port-from-an-%40ip">Allow INcomming requests on specific port from an @IP</h3>

<pre><code>ufw allow from XXX.XXX.XXX.XXX to any port 80
ufw allow from XXX.XXX.XXX.XXX to any port 3000
</code></pre>

<h3 id="for-apt-and-software-installation">For apt and software installation</h3>

<p>use that to allow apt, for instance <code>apt install -y lnav</code>:</p>

<pre><code>ufw allow out 80/tcp comment 'allow OUT 80 temporary for apt' &amp;&amp; ufw allow out 443/tcp comment 'allow OUT 443 temporary for apt'
</code></pre>

<p>remove:</p>

<pre><code>ufw delete allow out 80/tcp &amp;&amp; ufw delete allow out 443/tcp
</code></pre>

<p>OR:</p>

<pre><code>ufw default allow outgoing
</code></pre>

<p>remove:</p>

<pre><code>ufw default deny outgoing
</code></pre>

<h2 id="%C2%A0reset-all-rules">Â Reset all rules</h2>

<pre><code>ufw reset
</code></pre>

        </div>
            </article>
    <nav>
        <ul class="pager">
            <li class="next"><a href="/page/12">Older posts<span aria-hidden="true">&rarr;</span></a></li>            <li class="previous"><a href="/page/10"><span aria-hidden="true">&larr;</span> Newer posts</a></li>        </ul>
    </nav>
                </div>
                <!--<div class="span4 sidebar">-->
                    <!--<div class="well">-->
                        <!--<h4>benIT&#039;s notebook</h4>-->
                    <!--</div>-->
                    <!--<div class="well sidebar-nav">-->
                        <!--<h4>Links</h4>-->
                        <!--<ul class="nav">-->
                            <!--<li><a href="http://sculpin.io">sculpin.io</a></li>-->
                            <!--<li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>-->
                        <!--</ul>-->
                    <!--</div>-->
                <!--</div>-->
            </div>
        </div>
        <footer class="container">
            &copy; 2021 benIT&#039;s notebook
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

                    </body>
</html>
